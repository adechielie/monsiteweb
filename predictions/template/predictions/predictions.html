{% extends 'base.html' %}
{% load static %}

{% block title %}Pr√©dictions Tennis ATP{% endblock %}

{% block content %}


<style>
    .streamlit-container {
        width: 100%;
        height: 100vh;
        border: none;
        overflow: hidden;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .header-section {
        background: linear-gradient(135deg, #1E3EA6 0%, #2563eb 100%);
        color: white;
        padding: 3rem 2rem;
        text-align: center;
        margin-bottom: 2rem;
        border-radius: 8px;
    }
    
    .header-section h1 {
        margin: 0;
        font-size: 2.5rem;
        font-weight: 700;
        color: white;
    }
    
    .header-section p {
        margin: 1rem 0 0 0;
        font-size: 1.1rem;
        opacity: 0.95;
        color: white;
    }

    .info-section {
        margin-bottom: 2rem;
    }

    .info-card {
        background: #f8f9fa;
        padding: 1.5rem;
        border-radius: 8px;
        height: 100%;
        border-left: 4px solid #1E3EA6;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .info-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }

    .info-card h5 {
        color: #1E3EA6;
        font-weight: 600;
        margin-bottom: 0.75rem;
    }

    .info-card p {
        color: #495057;
        font-size: 0.95rem;
        margin: 0;
        line-height: 1.6;
    }

    .iframe-wrapper {
        position: relative;
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
</style>

<div class="container my-5">
    <!-- Header Section -->
    <section class="header-section">
        <h1>üéæ ATP Match Prediction</h1>
        <p>Pr√©disez les r√©sultats de matchs ATP avec l'intelligence artificielle</p>
    </section>

    <!-- Info Cards Section -->
    <section class="info-section mb-5">
        <div class="row g-4">
            <!-- Card 1 -->
            <div class="col-md-6 col-lg-3">
                <div class="info-card">
                    <h5>ü§ñ Machine Learning</h5>
                    <p>
                        Mod√®le entra√Æn√© sur plus de 60 000 matchs ATP avec un taux de pr√©cision de 96.61%.
                    </p>
                </div>
            </div>

            <!-- Card 2 -->
            <div class="col-md-6 col-lg-3">
                <div class="info-card">
                    <h5>üìä Donn√©es en temps r√©el</h5>
                    <p>
                        Analyse des statistiques ELO, classements ATP, performances par surface et head-to-head.
                    </p>
                </div>
            </div>

            <!-- Card 3 -->
            <div class="col-md-6 col-lg-3">
                <div class="info-card">
                    <h5>üìà Visualisations interactives</h5>
                    <p>
                        Graphiques dynamiques montrant l'√©volution des performances et les tendances des joueurs.
                    </p>
                </div>
            </div>

            <!-- Card 4 -->
            <div class="col-md-6 col-lg-3">
                <div class="info-card">
                    <h5>üéØ Pr√©dictions pr√©cises</h5>
                    <p>
                        Probabilit√©s de victoire calcul√©es en fonction de multiples facteurs statistiques et historiques.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Streamlit Integration -->
    <section>
        <div class="iframe-wrapper">
            <iframe 
                src="/prediction/" 
                class="streamlit-container"
                frameborder="0"
                scrolling="yes"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                loading="lazy"
            ></iframe>
        </div>
    </section>

    <!-- Additional Info Section (Optional) -->
    <section class="mt-5">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h2 style="color: #1E3EA6;" class="mb-3">Comment √ßa fonctionne ?</h2>
                <div class="mb-3">
                    <h5 class="fw-semibold text-primary">1. S√©lectionnez deux joueurs</h5>
                    <p class="small">
                        Choisissez les deux adversaires dans la liste d√©roulante contenant tous les joueurs ATP.
                    </p>
                </div>
                <div class="mb-3">
                    <h5 class="fw-semibold text-primary">2. Lancez la pr√©diction</h5>
                    <p class="small">
                        Notre mod√®le analyse instantan√©ment des dizaines de param√®tres : ELO, classement, forme r√©cente, performances sur surface, etc.
                    </p>
                </div>
                <div class="mb-3">
                    <h5 class="fw-semibold text-primary">3. Consultez les r√©sultats</h5>
                    <p class="small">
                        Obtenez les probabilit√©s de victoire, les statistiques d√©taill√©es et les graphiques de performance pour chaque joueur.
                    </p>
                </div>
            </div>
        </div>
    </section>
</div>

<script>
    // Ajuster la hauteur de l'iframe dynamiquement
    window.addEventListener('message', function(e) {
        if (e.data && e.data.height) {
            document.querySelector('.streamlit-container').style.height = e.data.height + 'px';
        }
    });

    // Smooth scroll pour la navigation
    document.addEventListener('DOMContentLoaded', function() {
        const iframe = document.querySelector('.streamlit-container');
        
        // Observer pour d√©tecter quand l'iframe est charg√©e
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    iframe.style.opacity = '1';
                }
            });
        }, { threshold: 0.1 });
        
        observer.observe(iframe);
    });
</script>
{% endblock %}
